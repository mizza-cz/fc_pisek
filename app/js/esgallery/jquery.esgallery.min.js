(function(b){b.fn.esgallery=function(g){var a=b.fn.esgallery;a.defaults={path:"esGallery/",container:"esgallery",containerOverlay:"esgallery-overlay",sprite:"sprite",onReady:!1,controlCaption:!0,controlPlaylist:!0,controlSlideshow:!0,controlFullImage:!1,controlTitle:!1,social:!1,summary:!1,htmlMediaPlaylist:"#media-playlist",htmlMediaControl:"#media-control",htmlMediaControlContainer:"#media-control-container",htmlMediaList:this.selector,htmlMediaMainContainer:"#media-main-container",htmlMediaCaption:"#media-caption",
htmlMediaContainer:"#media-container",htmlMediaContent:"#media-content",htmlMediaMain:"#media-main",htmlMediaImage:"#media-image",htmlMediaVideo:"#media-video",htmlMediaTop:"#media-top",htmlMediaSocial:"#media-socials",htmlMediaSummary:"#media-summary-list",htmlMediaLink:"#media-link",htmlMediaLinkUrl:"#media-link-url",htmlMediaLinkCopy:"#media-link-copy",htmlMediaLinkCopyHover:"hover",htmlCaptionContent:".caption-content",htmlCaptionText:".caption-text",htmlControlCaption:".control-caption",htmlControlPlaylist:".control-playlist",
htmlControlSlideshow:".control-slideshow",htmlControlFullImage:".control-full-image",htmlControlIco:".ico",htmlOpenLink:".esgallery-open",htmlCloseLink:".esgallery-close",htmlSummaryLink:".esgallery-summary",htmlPrevLink:"#prev",htmlNextLink:"#next",htmlArrow:".arrow",htmlLeft:".left",htmlRight:".right",htmlGlow:".glow",htmlError:".error",htmlActive:".active",htmlActiveControl:".active-control",htmlBodyLock:".esgallery-lock",htmlStopSlideshow:".stop-slideshow",showLink:"#show-link",showLinkCopy:"Kop\u00edrovat odkaz",
facebookLink:"#facebook",twitterLink:"#twitter",gplusLink:"#gplus",facebookSharer:"http://www.facebook.com/sharer.php?u=",twitterSharer:"http://www.twitter.com/share?url=",gplusSharer:"http://plus.google.com/share?url=",newWindowWidth:"700",newWindowHeight:"450",zeroClipboardJs:"esgallery/assets/ZeroClipboard/ZeroClipboard.min.js",zeroClipboardSwf:"esgallery/assets/ZeroClipboard/ZeroClipboard.swf",jwplayerJs:"esgallery/assets/jwplayer/jwplayer.js",jwplayerSwf:"esgallery/assets/jwplayer/player.swf"};
a.o=b.extend(a.defaults,g);a.b=b("body");a.lockGlow=!1;a.lockMedia=!1;a.isSlideshow=!1;a.captionHide=!1;a.isIE8=!1;a.mediaType="image";a.videoRender="flash";a.hash="";a.mediaListParent=b(a.o.htmlMediaList).parent();a.mediaTopParent=b(a.o.htmlMediaTop).parent();a.screenX=screen.width/2-a.o.newWindowWidth/2;a.screenY=screen.height/2-a.o.newWindowHeight/2;a.htmlWrapper=function(){var c=0;a.b.addClass(a.getName(a.o.htmlBodyLock));a.b.append('<div class="'+a.o.container+'"></div>');a.p=b("."+a.o.container);
b(a.p).show();b(a.p).wrap('<div class="'+a.o.containerOverlay+" "+a.o.sprite+'" />');b(a.o.htmlMediaMainContainer).append('<div id="'+a.getName(a.o.htmlMediaLink)+'" class="'+a.o.sprite+'"></div>');b(a.o.htmlMediaList).show();b(a.o.htmlMediaList).addClass("overview");b(a.o.htmlMediaList).wrap('<div class="viewport"></div>');b(".viewport").after('<div class="scrollbar"><div class="track"><div class="thumb"><div class="corner"></div><div class="main"></div><div class="corner"></div></div></div></div>');
b(".viewport, .scrollbar").wrapAll('<div id="'+a.getName(a.o.htmlMediaPlaylist)+'" class="'+a.o.sprite+'" />');b(a.o.htmlMediaPlaylist).before('<div id="'+a.getName(a.o.htmlMediaMainContainer)+'"><div class="'+a.getName(a.o.htmlArrow)+" "+a.getName(a.o.htmlLeft)+'"><a href="#" id="'+a.getName(a.o.htmlPrevLink)+'" class="'+a.o.sprite+'"><span class="'+a.getName(a.o.htmlGlow)+" "+a.o.sprite+'">&nbsp;</span></a></div><div id="'+a.getName(a.o.htmlMediaMain)+'"><div id="'+a.getName(a.o.htmlMediaContent)+
'"></div></div><div class="'+a.getName(a.o.htmlArrow)+" "+a.getName(a.o.htmlRight)+'"><a href="#" id="'+a.getName(a.o.htmlNextLink)+'" class="'+a.o.sprite+'"><span class="'+a.getName(a.o.htmlGlow)+" "+a.o.sprite+'">&nbsp;</span></a></div></div>');b(a.o.htmlMediaMainContainer+", "+a.o.htmlMediaPlaylist).wrapAll('<div id="'+a.getName(a.o.htmlMediaContainer)+'" />');b(a.o.htmlMediaMainContainer).append('<div id="'+a.getName(a.o.htmlMediaSummary)+'" />');a.o.summary||b(a.o.htmlMediaSummary).addClass("hide");
b(a.o.htmlMediaContent).append('<div id="'+a.getName(a.o.htmlMediaCaption)+'" />');b(a.o.htmlMediaCaption).append('<div class="'+a.getName(a.o.htmlCaptionContent)+'"><div class="'+a.getName(a.o.htmlCaptionText)+'"></div><div class="clear">&nbsp;</div></div>');b(a.o.htmlMediaPlaylist).before('<div id="'+a.getName(a.o.htmlMediaControl)+'" />');b(a.o.htmlMediaControl).append('<div id="'+a.getName(a.o.htmlMediaControlContainer)+'" />');a.o.controlCaption&&b(a.o.htmlMediaControlContainer).append('<a href="#" class="'+
a.getName(a.o.htmlControlCaption)+'"><span class="'+a.getName(a.o.htmlControlIco)+" "+a.o.sprite+'"></span></a> ');a.o.controlPlaylist&&b(a.o.htmlMediaControlContainer).append('<a href="#" class="'+a.getName(a.o.htmlControlPlaylist)+'"><span class="'+a.getName(a.o.htmlControlIco)+" "+a.o.sprite+'"></span></a> ');a.o.controlFullImage&&b(a.o.htmlMediaControlContainer).append('<a href="#" class="'+a.getName(a.o.htmlControlFullImage)+'"><span class="'+a.getName(a.o.htmlControlIco)+" "+a.o.sprite+'"></span></a> ');
a.o.controlSlideshow&&b(a.o.htmlMediaControlContainer).append('<a href="#" class="'+a.getName(a.o.htmlControlSlideshow)+'"><span class="'+a.getName(a.o.htmlControlIco)+" "+a.o.sprite+'"></span></a> ');a.o.controlTitle||b(a.o.htmlMediaControlContainer+" a ").width(b(a.o.htmlMediaControlContainer+" > a > "+a.o.htmlControlIco).width()).addClass("no-text");b(a.o.htmlMediaControlContainer+" > *").each(function(){c+=b(this).outerWidth(!0)});b(a.o.htmlMediaControlContainer).width(c+6);b(a.o.htmlMediaList+
" ul li").each(function(a){b(this).attr("name",a+1)});b(a.o.htmlMediaTop).show();b(a.o.htmlMediaTop).appendTo("."+a.o.container);b(a.o.htmlMediaContainer).appendTo("."+a.o.container);b(a.o.htmlMediaMainContainer).append('<div id="'+a.getName(a.o.htmlMediaLink)+'" class="'+a.o.sprite+'"></div>');b(a.o.htmlMediaLink).append('<div id="'+a.getName(a.o.htmlMediaLinkUrl)+'"></div>');b(a.o.htmlMediaLink).append('<div id="'+a.getName(a.o.htmlMediaLinkCopy)+'" data-clipboard-target="'+a.getName(a.o.htmlMediaLinkUrl)+
'">'+a.o.showLinkCopy+"</div>");b(a.o.htmlMediaList+" ul").clone().appendTo(a.o.htmlMediaSummary);return!0};a.htmlDeWrapper=function(){b(a.p).hide();b(a.o.htmlMediaTop).appendTo(a.mediaTopParent);b(a.o.htmlMediaList).appendTo(a.mediaListParent);b(a.o.htmlMediaContainer).remove();b("."+a.o.containerOverlay).remove();b(a.o.htmlMediaList).hide();b("body").removeClass(a.getName(a.o.htmlBodyLock));b(a.p).removeClass(a.o.container);b(a.o.htmlMediaTop).hide();return!0};a.getMediaMainContainerHeight=function(){var c=
0,d=0,e=0,c="none"==b(a.o.htmlMediaPlaylist).css("display")||"none"==b(a.o.htmlMediaPlaylist).attr("display")?0:b(a.o.htmlMediaPlaylist).height(),d="none"==b(a.o.htmlMediaControl).css("display")||"none"==b(a.o.htmlMediaControl).attr("display")?0:b(a.o.htmlMediaControl).outerHeight(!0);0<b(a.o.htmlMediaTop).height()&&(e+=b(a.o.htmlMediaTop).height());"video"==a.mediaType&&(e+=b(a.o.htmlMediaCaption).height());return a.getDocumentHeight()-c-d-e};a.getDocumentWidth=function(){return b(a.p).width()};
a.getDocumentHeight=function(){return b(a.p).height()};a.changeMediaContent=function(){var c=0,d=0;b(a.o.htmlMediaContent).width("100%");"image"==a.mediaType?(c=b(a.o.htmlMediaImage).width(),d=b(a.o.htmlMediaImage).height()):"video"==a.mediaType&&("flash"==a.videoRender?(c=b(a.o.htmlMediaVideo+"_wrapper").width(),d=b(a.o.htmlMediaVideo+"_wrapper").height()):"html5"==a.videoRender&&(c=b(a.o.htmlMediaVideo).width(),d=b(a.o.htmlMediaVideo).height()));b(a.o.htmlMediaTop).width(a.getDocumentWidth());b(a.o.htmlMediaContainer).width(a.getDocumentWidth());
b(a.o.htmlMediaContainer).height(a.getDocumentHeight());b(a.o.htmlMediaContent).width(c);b(a.o.htmlMediaCaption).width(c);"image"==a.mediaType?b(a.o.htmlMediaCaption).css("bottom",(b(a.o.htmlMediaMain).height()-d)/2):"video"==a.mediaType&&b(a.o.htmlMediaCaption).css("bottom",(b(a.o.htmlMediaMain).height()-d)/2-b(a.o.htmlMediaCaption).height())};a.test=function(){b(a.o.htmlMediaMainContainer+", "+a.o.htmlMediaMain+", "+a.o.htmlMediaContent).height(a.getMediaMainContainerHeight())};a.changeWindowSize=
function(){var c=a.getMediaMainContainerHeight(),d=a.getDocumentWidth(),e=0;b(a.o.htmlMediaList+" ul li").each(function(){e+=b(this).outerWidth(!0)});b(a.o.htmlMediaMainContainer+", "+a.o.htmlMediaMain+", "+a.o.htmlMediaContent).height(c);b(".viewport").width(d);b(".overview").width(e);e<d?b(a.o.htmlMediaList).width(d):b(a.o.htmlMediaList).width(e);a.initScrollbar();a.changeMediaContent();640>a.getDocumentHeight()&&"hide"!=b(a.o.htmlMediaCaption).attr("class")?(b(a.o.htmlControlCaption).addClass(a.getName(a.o.htmlActiveControl)),
b(a.o.htmlMediaCaption).addClass("hide"),a.captionHide=!0):640<a.getDocumentHeight()&&a.captionHide&&(b(a.o.htmlControlCaption).removeClass(a.getName(a.o.htmlActiveControl)),b(a.o.htmlMediaCaption).removeClass("hide"),a.captionHide=!1);c=b(".thumb").width()-2*b(".corner").width();b(".thumb > .main").width(c)};a.initSpinner=function(){if(!a.isIE8)return Spinner({length:12,radius:16,color:"#fff",className:"spinner"}).spin(document.getElementById(a.getName(a.o.htmlMediaMain)))};a.stopSpinner=function(b){a.isIE8||
b.stop()};a.changeCaption=function(c){var d=b(c).attr("alt"),e=b(c).parent().parent().children("div").html(),d=void 0!==e&&0<e.length?e:void 0!==d&&0<d.length?"<div>"+d+"</div>":"";a.o.controlFullImage&&b(c).parent().attr("data-href-full")&&(d=d+'<br><span class="link"><strong><a href="'+b(c).parent().attr("data-href-full")+'" target="_blank">Pln\u00e1 verze fotky</a></strong></span>');b(a.o.htmlCaptionText).html(d);0<d.length?b(a.o.htmlMediaCaption).height("auto"):b(a.o.htmlMediaCaption).height("0")};
a.hideCaption=function(){b(a.o.htmlMediaCaption).hide()};a.showCaption=function(){b(a.o.htmlMediaCaption).fadeIn(300)};a.changeImage=function(c){var d=a.getMediaMainContainerHeight(),e=800,f=c.attr("href");c.attr("data-href-exact")?f=c.attr("data-href-exact").replace("exact",d):(400>d?e=400:600>d?e=600:800>d&&(e=800),c.attr("data-href-"+e)&&(f=c.attr("data-href-"+e)));if(!f.length)return!1;var g=(new Date).getTime();b(a.o.htmlMediaContent).addClass("loading-"+g);a.hideImage();a.hideCaption();var l=
b("<img />").attr("src",f).attr("id",a.getName(a.o.htmlMediaImage)).hide().load(function(){a.removeImage();a.removeVideo();b(a.o.htmlMediaContent).removeClass("loading-"+g);b(a.o.htmlMediaContent).append(l);b(a.o.htmlMediaImage).attr("alt",c.children().attr("alt"));a.stopSpinner(spinner);b(a.o.htmlMediaImage).fadeIn(300);setTimeout(function(){a.test();a.changeMediaContent();a.changeCaption(c.children());a.showCaption()},150)});setTimeout(function(){b(".loading-"+g).attr("id")==a.getName(a.o.htmlMediaContent)&&
(b(a.o.htmlMediaMainContainer).width("100%"),b(a.o.htmlMediaMain).width("100%"),b(a.o.htmlMediaContent).width("100%"),b(a.o.htmlMediaContent).append('<span class="'+a.getName(a.o.htmlError)+'" />'),a.stopSpinner(spinner),b(a.o.htmlMediaContent).removeClass("loading-"+g))},15E3);return!0};a.hideImage=function(){b(a.o.htmlMediaImage).hide()};a.removeImage=function(){b(a.o.htmlMediaImage).remove()};a.changeVideo=function(c){var d=315,e=560,f="",g=c.attr("data-video-height"),l=c.attr("data-video-width"),
k=c.attr("data-video-image");a.removeImage();a.removeVideo();a.hideCaption();a.stopSpinner(spinner);0<g&&(d=g);0<l&&(e=l);k&&(f=k);b(a.o.htmlMediaContent).append('<script type="text/javascript" src="'+a.o.jwplayerJs+'"><\/script>');b(a.o.htmlMediaContent).append('<div id="'+a.getName(a.o.htmlMediaVideo)+'"></div>');b(a.o.htmlMediaContent).append("<script type='text/javascript'>jwplayer('"+a.getName(a.o.htmlMediaVideo)+"').setup({ modes: [{ type: 'flash', src: '"+a.o.jwplayerSwf+"', config: {'image': '"+
f+"'} }, { type: 'html5' }], 'file': '"+c.attr("href")+"', 'height': "+d+", 'width': "+e+", 'allowfullscreen': true, 'youtube.quality': 'highres', 'autostart': true, 'controlbar': 'over'});<\/script>");a.changeCaption(c.children());a.showCaption();jwplayer().onReady(function(){a.videoRender=jwplayer().renderingMode;a.test();a.changeMediaContent()})};a.removeVideo=function(){"flash"==a.videoRender?b(a.o.htmlMediaVideo+"_wrapper").remove():"html5"==a.videoRender&&b(a.o.htmlMediaVideo).remove()};a.changeItem=
function(c,d){a.lockMedia||(a.lockMedia=!0,b(a.o.htmlError).remove(),b(a.o.htmlMediaContent).removeClass(),b(".spinner").length||(spinner=a.initSpinner()),"video"==d.children().attr("data-media-type")?(a.mediaType="video",a.isSlideshow&&a.toggleSlideshow(),a.changeVideo(c),a.o.controlFullImage&&a.toggleFullImage(!1)):(a.mediaType="image",a.changeImage(c),a.o.controlFullImage&&(d.children().attr("data-href-full")?a.toggleFullImage(!0,d.children().attr("data-href-full")):a.toggleFullImage(!1))),a.elNewName=
b(d).attr("name"),a.checkFirstLast(a.elNewName),a.changePlaylistActive(a.elNewName),a.changeScrollbarPosition(c,a.elNewName),a.setHash(c),setTimeout(function(){a.lockMedia=!1},500))};a.initScrollbar=function(c){var d=b(a.o.htmlMediaPlaylist);d.tinyscrollbar({axis:"x"});0<c&&d.tinyscrollbar_update(c)};a.changeScrollbarPosition=function(c,d){var e=b(a.o.htmlMediaList+' ul > li[name="'+d+'"]'),f=e.position().left+e.outerWidth(!0);a.checkLast(e)||(f+=c.parent().prev().outerWidth(!0));!a.checkLast(e)&&
!b(a.o.htmlMediaList+" > ul > li:last-child").prev().is(e)&&(f+=c.parent().prev().outerWidth(!0));e=f-a.getDocumentWidth();a.initScrollbar(e)};a.scrollToActive=function(){var c=b(a.o.htmlMediaList+" ul > li"+a.o.htmlActive),d=c.position().left+c.outerWidth(!0);a.checkLast(c.next())||(d+=c.next().outerWidth(!0));a.checkLast(c.next().next())||(d+=c.next().next().outerWidth(!0));c=d-a.getDocumentWidth();a.initScrollbar(c)};a.moveNext=function(c){if(!a.checkLast(b(a.o.htmlActive))){var d=b(a.o.htmlActive).next("li").children(),
e=b(a.o.htmlActive).next("li");a.changeItem(d,e);!0==c&&a.animateArrow(a.o.htmlNextLink,"both")}};a.movePrev=function(c){if(!a.checkFirst(b(a.o.htmlActive))){var d=b(a.o.htmlActive).prev("li").children(),e=b(a.o.htmlActive).prev("li");a.changeItem(d,e);!0==c&&a.animateArrow(a.o.htmlPrevLink,"both")}};a.checkFirstLast=function(c){b('li[name="'+c+'"]').is(":first-child")?b(a.o.htmlPrevLink).addClass("hidden"):b(a.o.htmlPrevLink).removeClass("hidden");b('li[name="'+c+'"]').is(":last-child")?b(a.o.htmlNextLink).addClass("hidden"):
b(a.o.htmlNextLink).removeClass("hidden")};a.checkFirst=function(a){return b(a).is(":first-child")};a.checkLast=function(a){return b(a).is(":last-child")};a.changeDefaultItem=function(c){a.changeItem(b(c),b(c).parent())};a.changeFromPlaylist=function(c){a.hideSummary();a.changeItem(b(c),b(c).parent())};a.changeFromSummary=function(c){a.hideSummary();a.changeItem(b(c),b(c).parent())};a.changePlaylistActive=function(c){b(a.o.htmlMediaList+" > ul > li").removeClass(a.getName(a.o.htmlActive));b(a.o.htmlMediaSummary+
" > ul > li").removeClass(a.getName(a.o.htmlActive));b('li[name="'+c+'"]').addClass(a.getName(a.o.htmlActive))};a.toggleSummary=function(){if(!a.o.htmlMediaSummary)return!1;"hide"==b(a.o.htmlMediaSummary).attr("class")?b(a.o.htmlMediaSummary).toggleClass("hide"):setTimeout(function(){b(a.o.htmlMediaSummary).toggleClass("hide")},500);return!0};a.hideSummary=function(){if(!a.o.htmlMediaSummary)return!1;b(a.o.htmlMediaSummary).addClass("hide");return!0};a.toggleCaption=function(){if(!a.o.controlCaption)return!1;
b(a.o.htmlMediaCaption).fadeToggle(400);"hide"==b(a.o.htmlMediaCaption).attr("class")?b(a.o.htmlMediaCaption).toggleClass("hide"):setTimeout(function(){b(a.o.htmlMediaCaption).toggleClass("hide")},500);b(a.o.htmlControlCaption).toggleClass(a.getName(a.o.htmlActiveControl));return!0};a.togglePlaylist=function(){if(!a.o.controlPlaylist)return!1;var c=b(a.o.htmlMediaPlaylist).outerHeight(!0);b(a.o.htmlMediaPlaylist).hasClass("hide")?(b(a.o.htmlMediaPlaylist).toggleClass("hide"),b(a.o.htmlMediaPlaylist).slideDown(400),
b(a.o.htmlMediaControl).animate({bottom:"+="+c},400)):(b(a.o.htmlMediaPlaylist).slideUp(400),setTimeout(function(){b(a.o.htmlMediaPlaylist).toggleClass("hide")},400),b(a.o.htmlMediaControl).animate({bottom:"-="+c},400));setTimeout(function(){a.changeWindowSize();a.scrollToActive();b(a.o.htmlControlPlaylist).toggleClass(a.getName(a.o.htmlActiveControl))},400);return!0};a.toggleSlideshow=function(){if(!a.o.controlSlideshow)return!1;a.isSlideshow?a.isSlideshow=!1:(a.isSlideshow=!0,a.slideshow());b(a.o.htmlControlSlideshow).toggleClass(a.getName(a.o.htmlActiveControl));
return!0};a.toggleFullImage=function(c,d){if(!a.o.htmlControlFullImage)return!1;c?0<d.length?(b(a.o.htmlControlFullImage).show(),b(a.o.htmlControlFullImage).attr("target","_blank"),b(a.o.htmlControlFullImage).attr("href",d)):b(a.o.htmlControlFullImage).hide():(b(a.o.htmlControlFullImage).hide(),b(a.o.htmlControlFullImage).attr("target","_blank"));return!0};a.slideshow=function(){a.hideSummary();a.isSlideshow&&(a.moveNext(!0),setTimeout(function(){a.slideshow()},3E3));a.checkLast(b(a.o.htmlActive))&&
a.toggleSlideshow()};a.animateArrow=function(c,d){a.lockGlow||(a.lockGlow=!0,("in"==d||"both"==d)&&b(c+" > span"+a.o.htmlGlow).delay(100).fadeIn(400),("out"==d||"both"==d)&&b(c+" > span"+a.o.htmlGlow).delay(100).fadeOut(200),setTimeout(function(){a.lockGlow=!1},300))};a.keyCapture=function(c){switch(c.keyCode){case 39:a.moveNext(!0);break;case 38:a.togglePlaylist();break;case 32:a.toggleSlideshow();break;case 37:a.movePrev(!0);break;case 40:a.togglePlaylist();break;case 36:a.changeFromPlaylist(b(a.o.htmlMediaList+
" > ul > li:first-child > a"));break;case 35:a.changeFromPlaylist(b(a.o.htmlMediaList+" > ul > li:last-child > a"))}};a.setHash=function(c){var c=Number(c.parent().attr("name")),d=window.location.href;b(a.o.htmlPrevLink).attr("href","#"+(c-1));b(a.o.htmlNextLink).attr("href","#"+(c+1));a.o.social&&(b(a.o.facebookLink).attr("href",a.o.facebookSharer+a.replaceHash(d)+"%23"+c),b(a.o.twitterLink).attr("href",a.o.twitterSharer+a.replaceHash(d)+"%23"+c),b(a.o.gplusLink).attr("href",a.o.gplusSharer+a.replaceHash(d)+
"%23"+c),b(a.o.htmlMediaLinkUrl).text(a.replaceHash(d)+"#"+c))};a.setDefaultItem=function(){var c="";window.location.hash?c=window.location.hash:a.hash&&(c=a.hash);console.log(c);defaultItemHashLength=c.length;defaultItemHashIndex=c.lastIndexOf("#");console.log(c);c=c.substring(defaultItemHashIndex,defaultItemHashLength);console.log(c);c=c.replace("#","")-1;console.log(c);return 0<=c?(a.hideSummary(),b(a.o.htmlMediaList+" > ul > li > a")[c]):b(a.o.htmlMediaList+" > ul > li:first > a")};a.ie8Detection=
function(){return b.browser.msie&&"9.0">b.browser.version};a.getName=function(a){return a?a.replace(".","").replace("#",""):!1};a.replaceHash=function(a){return a.replace("#","")};a.openWindow=function(b,d){window.open(b,d,"width="+a.o.newWindowWidth+",height="+a.o.newWindowHeight+",left="+a.screenX+",top="+a.screenY)};a.init=function(){a.htmlWrapper()&&(a.isIE8=a.ie8Detection(),a.initScrollbar(0),a.changeWindowSize(),a.changeDefaultItem(a.setDefaultItem()),b(a.o.htmlMediaList+" > ul > li > a").click(function(b){b.preventDefault();
a.isSlideshow&&a.toggleSlideshow();a.changeFromPlaylist(this)}),b(a.o.htmlMediaSummary+" > ul > li > a").click(function(b){b.preventDefault();a.changeFromSummary(this)}),b(window).resize(function(){a.changeWindowSize();a.changeScrollbarPosition(b(a.o.htmlActive),b(a.o.htmlActive))}),a.isIE8||window.addEventListener("orientationchange",function(){a.changeWindowSize();a.changeScrollbarPosition(b(a.o.htmlActive),b(a.o.htmlActive))},!1),b(a.o.showLink).bind("click",function(c){c.preventDefault();b(a.o.htmlMediaLink).show()}),
a.o.social&&(b(a.o.htmlMediaContent).append('<script type="text/javascript" src="'+a.o.zeroClipboardJs+'"><\/script>'),(new ZeroClipboard(b(a.o.htmlMediaLinkCopy),{moviePath:a.o.zeroClipboardSwf,hoverClass:a.o.htmlMediaLinkCopyHover})).on("complete",function(){b(a.o.htmlMediaLink).hide()})),b(a.o.facebookLink).bind("click",function(c){c.preventDefault();a.openWindow(b(a.o.facebookLink).attr("href"),"facebook")}),b(a.o.twitterLink).bind("click",function(c){c.preventDefault();a.openWindow(b(a.o.twitterLink).attr("href"),
"twitter")}),b(a.o.gplusLink).bind("click",function(c){c.preventDefault();window.open(b(a.o.gplusLink).attr("href"),"gplus","width="+a.o.newWindowWidth+",height="+a.o.newWindowHeight+",left="+a.screenX+",top="+a.screenY)}),b(a.o.htmlNextLink).bind("click",function(b){b.preventDefault();a.isSlideshow&&a.toggleSlideshow();a.moveNext(!1)}).bind("mouseenter",function(){a.animateArrow(a.o.htmlNextLink,"in")}).bind("mouseleave",function(){a.animateArrow(a.o.htmlNextLink,"out")}),b(a.o.htmlPrevLink).bind("click",
function(b){b.preventDefault();a.isSlideshow&&a.toggleSlideshow();a.movePrev(!1)}).bind("mouseenter",function(){a.animateArrow(a.o.htmlPrevLink,"in")}).bind("mouseleave",function(){a.animateArrow(a.o.htmlPrevLink,"out")}),b(a.o.htmlCloseLink).click(function(c){"#"==b(a.o.htmlCloseLink).attr("href")&&(c.preventDefault(),a.htmlDeWrapper())}),b("."+a.o.container).click(function(a){a.stopPropagation()}),b("."+a.o.containerOverlay).click(function(b){b.preventDefault();a.htmlDeWrapper()}),b(a.o.htmlControlCaption).click(function(b){b.preventDefault();
a.toggleCaption()}),b(a.o.htmlControlPlaylist).click(function(b){b.preventDefault();a.togglePlaylist()}),b(a.o.htmlControlSlideshow).click(function(b){b.preventDefault();a.toggleSlideshow()}),b(a.o.htmlSummaryLink).click(function(c){c.preventDefault();a.isSlideshow&&a.toggleSlideshow();b(a.o.htmlMediaContent).append('<span class="'+a.getName(a.o.htmlStopSlideshow)+'" />');setTimeout(function(){b(a.o.htmlStopSlideshow).remove();a.toggleSummary()},3E3)}),b(document).keydown(function(b){a.keyCapture(b)}),
b(a.o.htmlMediaMainContainer).mousewheel(function(b,d,e,f){0<f?(a.isSlideshow&&a.toggleSlideshow(),a.movePrev(!0)):0>f&&(a.isSlideshow&&a.toggleSlideshow(),a.moveNext(!0))}),b(a.o.htmlMediaMainContainer).on({swipeleft:function(){a.isSlideshow&&a.toggleSlideshow();a.moveNext(!0)},swiperight:function(){a.isSlideshow&&a.toggleSlideshow();a.movePrev(!0)}}))};return this.each(function(){if(0==b(a.o.htmlMediaList+" ul li").length)return!1;a.o.social||b(a.o.htmlMediaSocial).remove();a.o.onReady?a.init():
b(a.o.htmlOpenLink).live("click",function(c){c.preventDefault();b(this).attr("href")&&(a.hash=b(this).attr("href").replace(/^.*#/,""));a.init()});return!0})}})(jQuery);(function(b,g,a){var c=jQuery.event,d=function(a,b,c,d){var e,i,j,f,r,n,p,x;for(e=0;e<b.length;e++){i=b[e];f=0>i.indexOf(".");f||(j=i.split("."),i=j.shift(),p=RegExp("(^|\\.)"+j.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)"));j=(a[i]||[]).slice(0);for(r=0;r<j.length;r++)n=j[r],(x=f||p.test(n.namespace))&&(d?n.selector===d&&c(i,n.origHandler||n.handler):null===d?c(i,n.origHandler||n.handler,n.selector):n.selector||c(i,n.origHandler||n.handler))}};c.find=function(a,b,c){var a=(g._data(a)||{}).events,
e=[];if(!a)return e;d(a,b,function(a,b){e.push(b)},c);return e};c.findBySelector=function(a,b){var c=g._data(a).events,e={};if(!c)return e;d(c,b,function(a,b,c){c=c||"";c=e[c]||(e[c]={});(c[a]||(c[a]=[])).push(b)},null);return e};c.supportTouch="ontouchend"in document;g.fn.respondsTo=function(a){return this.length?0<c.find(this[0],g.isArray(a)?a:[a]).length:!1};g.fn.triggerHandled=function(a,b){a="string"==typeof a?g.Event(a):a;this.trigger(a,b);return a.handled};c.setupHelper=function(a,b,d){d||
(d=b,b=null);var e=function(e){var f=e.selector||"",h=e.namespace?"."+e.namespace:"";f?(e=c.find(this,a,f),e.length||g(this).delegate(f,b+h,d)):c.find(this,a,f).length||c.add(this,b+h,d,{selector:f,delegate:this})},f=function(e){var f=e.selector||"";f?(e=c.find(this,a,f),e.length||g(this).undelegate(f,b,d)):c.find(this,a,f).length||c.remove(this,b,d,{selector:f,delegate:this})};g.each(a,function(){c.special[this]={add:e,remove:f,setup:function(){},teardown:function(){}}})};var e=(b=!/Phantom/.test(navigator.userAgent)&&
"ontouchend"in document)?"touchend":"mouseup",f=b?"touchmove":"mousemove",u=function(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;return{time:(new Date).getTime(),coords:[b.pageX,b.pageY],origin:g(a.target)}},l=g.event.swipe={delay:1E3,max:320,min:30};g.event.setupHelper(["swipe","swipeleft","swiperight","swipeup","swipedown"],b?"touchstart":"mousedown",function(b){function c(a){d&&(h=u(a),10<Math.abs(d.coords[0]-h.coords[0])&&a.preventDefault())}var d=u(b),h,q=b.delegateTarget||
b.currentTarget,i=b.handleObj.selector,j=this;g(document.documentElement).bind(f,c).one(e,function(){g(this).unbind(f,c);if(d&&h){var e=Math.abs(d.coords[0]-h.coords[0]),r=Math.abs(d.coords[1]-h.coords[1]),n=Math.sqrt(e*e+r*r);h.time-d.time<l.delay&&(n>=l.min&&n<=l.max)&&(n=["swipe"],e>=l.min&&r<l.min?n.push(d.coords[0]>h.coords[0]?"swipeleft":"swiperight"):r>=l.min&&e<l.min&&n.push(d.coords[1]<h.coords[1]?"swipedown":"swipeup"),g.each(g.event.find(q,n,i),function(){this.call(j,b,{start:d,end:h})}))}d=
h=a})})})(this,jQuery);(function(b){function g(a){var c=a||window.event,f=[].slice.call(arguments,1),g=0,l=0,k=0,a=b.event.fix(c);a.type="mousewheel";c.wheelDelta&&(g=c.wheelDelta/120);c.detail&&(g=-c.detail/3);k=g;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(k=0,l=-1*g);void 0!==c.wheelDeltaY&&(k=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(l=-1*c.wheelDeltaX/120);f.unshift(a,g,l,k);return(b.event.dispatch||b.event.handle).apply(this,f)}var a=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var c=a.length;c;)b.event.fixHooks[a[--c]]=
b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=a.length;b;)this.addEventListener(a[--b],g,!1);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var b=a.length;b;)this.removeEventListener(a[--b],g,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);(function(b){function g(a,c){var d,e,f;function g(a){b("body").addClass("noSelect");var c=parseInt(j.obj.css(r),10);d=m?a.pageX:a.pageY;e="auto"==c?0:c;x?(document.ontouchmove=function(a){a.preventDefault();k(a.touches[0])},document.ontouchend=t):(b(document).bind("mousemove",k),b(document).bind("mouseup",t),j.obj.bind("mouseup",t))}function l(a){if(1>h.ratio&&(a=a||window.event,p-=(a.wheelDelta?a.wheelDelta/120:-a.detail/3)*c.wheel,p=Math.min(h[c.axis]-s[c.axis],Math.max(0,p)),j.obj.css(r,p/q.ratio),
h.obj.css(r,-p),c.lockscroll||p!==h[c.axis]-s[c.axis]&&0!==p))a=b.event.fix(a),a.preventDefault()}function k(a){1>h.ratio&&(f=c.invertscroll&&x?Math.min(i[c.axis]-j[c.axis],Math.max(0,e+(d-(m?a.pageX:a.pageY)))):Math.min(i[c.axis]-j[c.axis],Math.max(0,e+((m?a.pageX:a.pageY)-d))),p=f*q.ratio,h.obj.css(r,-p),j.obj.css(r,f))}function t(){b("body").removeClass("noSelect");b(document).unbind("mousemove",k);b(document).unbind("mouseup",t);j.obj.unbind("mouseup",t);document.ontouchmove=document.ontouchend=
null}var s={obj:b(".viewport",a)},h={obj:b(".overview",a)},q={obj:b(".scrollbar",a)},i={obj:b(".track",q.obj)},j={obj:b(".thumb",q.obj)},m="x"===c.axis,r=m?"left":"top",n=m?"Width":"Height",p=0;f=e=0;d=void 0;var x="ontouchstart"in document.documentElement;this.update=function(a){s[c.axis]=s.obj[0]["offset"+n];h[c.axis]=h.obj[0]["scroll"+n];h.ratio=s[c.axis]/h[c.axis];q.obj.toggleClass("disable",1<=h.ratio);i[c.axis]="auto"===c.size?s[c.axis]:c.size;j[c.axis]=Math.min(i[c.axis],Math.max(0,"auto"===
c.sizethumb?i[c.axis]*h.ratio:c.sizethumb));q.ratio="auto"===c.sizethumb?h[c.axis]/i[c.axis]:(h[c.axis]-s[c.axis])/(i[c.axis]-j[c.axis]);p="relative"===a&&1>=h.ratio?Math.min(h[c.axis]-s[c.axis],Math.max(0,p)):0;p="bottom"===a&&1>=h.ratio?h[c.axis]-s[c.axis]:isNaN(parseInt(a,10))?p:parseInt(a,10);a=n.toLowerCase();j.obj.css(r,p/q.ratio);h.obj.css(r,-p);d=j.obj.offset()[r];q.obj.css(a,i[c.axis]);i.obj.css(a,i[c.axis]);j.obj.css(a,j[c.axis])};this.update();x?s.obj[0].ontouchstart=function(a){1===a.touches.length&&
(g(a.touches[0]),a.stopPropagation())}:(j.obj.bind("mousedown",g),i.obj.bind("mouseup",k));c.scroll&&window.addEventListener?(a[0].addEventListener("DOMMouseScroll",l,!1),a[0].addEventListener("mousewheel",l,!1),a[0].addEventListener("MozMousePixelScroll",function(a){a.preventDefault()},!1)):c.scroll&&(a[0].onmousewheel=l);return this}b.tiny=b.tiny||{};b.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto",invertscroll:!1}};b.fn.tinyscrollbar=function(a){var c=
b.extend({},b.tiny.scrollbar.options,a);this.each(function(){b(this).data("tsb",new g(b(this),c))});return this};b.fn.tinyscrollbar_update=function(a){return b(this).data("tsb").update(a)}})(jQuery);!function(b,g,a){function c(a,b){var c=g.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function d(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function e(b,c){var d=b.style,e,f;if(d[c]!==a)return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(f=0;f<t.length;f++)if(e=t[f]+c,d[e]!==a)return e}function f(a,b){for(var c in b)a.style[e(a,c)||c]=b[c];return a}function u(b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;for(e in d)b[e]===a&&(b[e]=d[e])}return b}
function l(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function k(a){if(!this.spin)return new k(a);this.opts=u(a||{},k.defaults,j)}var t=["webkit","Moz","ms","O"],s={},h,q,i=c("style",{type:"text/css"});d(g.getElementsByTagName("head")[0],i);q=i.sheet||i.styleSheet;var j={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};
k.defaults={};u(k.prototype,{spin:function(a){this.stop();var b=this,d=b.opts,e=b.el=f(c(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex}),g=d.radius+d.length+d.width,i,j;a&&(a.insertBefore(e,a.firstChild||null),j=l(a),i=l(e),f(e,{left:("auto"==d.left?j.x-i.x+(a.offsetWidth>>1):parseInt(d.left,10)+g)+"px",top:("auto"==d.top?j.y-i.y+(a.offsetHeight>>1):parseInt(d.top,10)+g)+"px"}));e.setAttribute("aria-role","progressbar");b.lines(e,b.opts);if(!h){var k=0,q=d.fps,s=q/d.speed,
v=(1-d.opacity)/(s*d.trail/100),m=s/d.lines;(function w(){k++;for(var a=d.lines;a;a--){var c=Math.max(1-(k+a*m)%s*v,d.opacity);b.opacity(e,d.lines-a,c,d)}b.timeout=b.el&&setTimeout(w,~~(1E3/q))})()}return b},stop:function(){var b=this.el;b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),this.el=a);return this},lines:function(a,b){function e(a,d){return f(c(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",
transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}for(var g=0,i;g<b.lines;g++){i=c();var j=1+~(b.width/2)+"px",k=b.hwaccel?"translate3d(0,0,0)":"",l=b.opacity,m;if(m=h){m=b.opacity;var t=b.trail,v=g,u=b.lines,y=["opacity",t,~~(100*m),v,u].join("-"),v=0.01+100*(v/u),u=Math.max(1-(1-m)/t*(100-v),m),w=h.substring(0,h.indexOf("Animation")).toLowerCase(),w=w&&"-"+w+"-"||"";s[y]||(q.insertRule("@"+w+"keyframes "+y+"{0%{opacity:"+
u+"}"+v+"%{opacity:"+m+"}"+(v+0.01)+"%{opacity:1}"+(v+t)%100+"%{opacity:"+m+"}100%{opacity:"+u+"}}",q.cssRules.length),s[y]=1);m=y+" "+1/b.speed+"s linear infinite"}i=f(i,{position:"absolute",top:j,transform:k,opacity:l,animation:m});b.shadow&&d(i,f(e("#000","0 0 4px #000"),{top:"2px"}));d(a,d(i,e(b.color,"0 0 1px rgba(0,0,0,.1)")))}return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var m=function(a,b){return c("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',
b)},i=f(c("group"),{behavior:"url(#default#VML)"});!e(i,"transform")&&i.adj?(q.addRule(".spin-vml","behavior:url(#default#VML)"),k.prototype.lines=function(a,b){function c(){return f(m("group",{coordsize:i+" "+i,coordorigin:-g+" "+-g}),{width:i,height:i})}function e(a,h,i){d(j,d(f(c(),{rotation:360/b.lines*a+"deg",left:~~h}),d(f(m("roundrect",{arcsize:b.corners}),{width:g,height:b.width,left:b.radius,top:-b.width>>1,filter:i}),m("fill",{color:b.color,opacity:b.opacity}),m("stroke",{opacity:0}))))}
var g=b.length+b.width,i=2*g,h=2*-(b.width+b.length)+"px",j=f(c(),{position:"absolute",top:h,left:h});if(b.shadow)for(h=1;h<=b.lines;h++)e(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=b.lines;h++)e(h);return d(a,j)},k.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;if(a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild))a.opacity=c}):h=e(i,"animation");"function"==typeof define&&define.amd?
define(function(){return k}):b.Spinner=k}(window,document);
